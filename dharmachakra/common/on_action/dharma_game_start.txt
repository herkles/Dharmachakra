on_game_start = {
	on_actions = {
		dharma_setup_after_game_start_on_actions
	}
}


# Like on_game_start, except it is called once the host (or player, in single player) exits the lobby. Good for anything where you need to know who the players are, or what the game rules are
dharma_setup_after_game_start_on_actions = {
	events = {
		dharma_artifacts.001	# Generating Historical Artifacts
	}

	effect = {
		if = {# Lingayatism is active after 1167
			limit = { game_start_date >= 1150.1.1 }
			faith:lingayatism = { remove_doctrine = unavailable_doctrine }			
			set_global_variable = {
				name = ligayatism_spawned
				value = yes
			}
		}
		if = {# Saura is in decline in the 12th century
			limit = {
				game_start_date >= 1150.1.1
			}
			faith:suryaism = {
				change_fervor = {
					value = medium_fervor_loss
					desc = saura_decline
				}
			}
		}
		if = {# getting Zun on the map in 867
			limit = {
				game_start_date < 900.1.1
			}	
			title:c_bost = {
				set_county_faith = faith:zun_pagan
			}	
			title:c_zamindawar = {
				set_county_faith = faith:zun_pagan
				set_county_culture = culture:turco_hephthalite

			}	
			title:c_rukhaj = {
				set_county_faith = faith:zun_pagan
			}	
			title:c_zabulistan = {
				set_county_faith = faith:zun_pagan
			}
		}
		if = {
			limit = {
				game_start_date >= 900.1.1
			}
			title:c_bost = {
				set_county_culture = culture:khalaj
			}
			title:c_rukhaj = {
				set_county_culture = culture:khalaj
			}
		}
		# Language Breaking up for start dates
		if = {# Konkani Language forming
			limit = { game_start_date >= 1100.1.1 }
			# set_global_variable = {
			# 	name = dharma_language_konkani_formed
			# 	value = yes
			# }
			culture:konkani = { set_culture_pillar = language_konkani }
		}
		if = {# sindhi and punjabi spliting
			limit = { game_start_date >= 1100.1.1 }
			# set_global_variable = {
			# 	name = dharma_language_split_vrachada
			# 	value = yes
			# }
			culture:punjabi = { set_culture_pillar = language_panchanada }
			culture:multani = { set_culture_pillar = language_panchanada }
			culture:sindhi = { set_culture_pillar = language_sindhi }
		}		
		if = {# Magadhian split
			limit = { game_start_date >= 1100.1.1 }
			# set_global_variable = {
			# 	name = dharma_language_split_magadhi
			# 	value = yes
			# }
			culture:bihari = { set_culture_pillar = language_bihari }
			culture:magadhi = { set_culture_pillar = language_bihari }
			culture:maithili = { set_culture_pillar = language_bihari }
			culture:oriya = { set_culture_pillar = language_odia }
			culture:bengali = { set_culture_pillar = language_bangla }
			culture:kamarupi = { set_culture_pillar = language_kamarupi }
		}		
		if = {# Khasa Split
			limit = { game_start_date >= 1100.1.1 }
			# set_global_variable = {
			# 	name = dharma_language_split_khasa
			# 	value = yes
			# }
			culture:garwhali = { set_culture_pillar = language_garwhali }
			culture:kuamoni = { set_culture_pillar = language_kumaoni }
		}
		# Special buildings if you don't own the monument dlc
		if = {# special buildings - 867
			limit = {
				has_cp3_dlc_trigger = no
				game_start_date >= 867.1.1
			}
	        title:b_vatapi.title_province = { add_special_building = pattadakal_01 } #9237
			title:b_konarak.title_province = { add_special_building_slot = konark_sun_temple_01 } #9237

		}
		if = {# Konark Sun Temple
			limit = {
				has_cp3_dlc_trigger = no
				game_start_date >= 1250.1.1
			}
	        title:b_konarak.title_province = { add_special_building = konark_sun_temple_01 } #9237
		}
		if = {# Upgradable special buildings
			limit = {
				has_cp3_dlc_trigger = no
				game_start_date >= 867.1.1
			}
	        title:b_lhasa.title_province = { add_special_building = potala_palace_01 } #9237
		}
		else_if = {# 1066 special buildings. 
			limit = {
				has_cp3_dlc_trigger = no
				game_start_date >= 1066.1.1
			}
	        title:b_lhasa.title_province = { add_special_building = potala_palace_02 } #9237
		}
	}
}
